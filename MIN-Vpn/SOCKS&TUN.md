## SOCKS

SOCKS是一种网络传输协议，主要用于客户端与外网服务器之间通讯的中间传递。其工作在会话层，提供一种 TCP、UDP会话的转发，允许用户可以透明的穿透防火墙的阻拦。

### 原理

当防火墙后的客户端要访问外部的服务器时，要先和SOCKS代理服务器连接。通过鉴权之后，将外部服务器的地址告知代理服务器，代理服务器在建立与外部服务器的连接后，会将客户端的请求发往该外部服务器，并将外部服务器的响应结果返回给客户端。一旦代理和服务器之间正确建立连接，客户端和服务器通过代理连接，可以进行透明的数据交互。

### 工作过程

<img src="https://pic1.zhimg.com/v2-5fca0d6c2fce1fae7da7ab9669bf3cf8_b.jpg" alt="img" style="zoom:80%;" />


## TUN

TUN 设备是一种虚拟网络设备，通过此设备，程序可以方便地模拟网络行为。TUN 模拟的是一个三层设备，也就是说，通过它可以处理来自网络层的数据；更通俗一点的说，通过它，我们可以处理 IP 数据包。

主要功能：
· 可以将数据传输到本机的另一个网卡(虚拟网卡或物理网卡)或其它虚拟设备(如虚拟交换机)上
· 可以在用户空间运行一个可读写虚拟网卡的程序，该程序可将流经虚拟网卡的数据包进行处理，这个用户程序就像是物理网卡的硬件功能一样，可以收发数据(可将物理网卡的硬件功能看作是嵌入在网卡上的程序)，比如OpenVPN就是这样的工具



## sysproxy
通过InternetSetOption()来改变LAN的代理信息，从而设置系统代理。

当参数为pac url时，运行后改变如下的参数。

![微信图片_20210811172225](https://user-images.githubusercontent.com/49645739/129004901-eaddd1d1-7b63-4943-bee7-a5cd39e5539b.png)
